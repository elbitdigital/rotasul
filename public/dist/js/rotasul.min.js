/*!
 * Mowe {ProjectName} Project v0.0.0 (http://letsmowe.org/)
 * Copyright 2013-2015 Mowe Developers
 * Licensed under MIT (https://github.com/mowekabanas/base/blob/master/LICENSE)
*/
var Contact=function(){function e(){var e=0,t=2,i="http://mailman.letsmowe.com/citodon/",s=!1,n={viewport:document.getElementById("cForm")};n.fields={},n.sendButton={},n.fields.cName=document.getElementById("cName"),n.fields.cCity=document.getElementById("cCity"),n.fields.cPhone=document.getElementById("cPhone"),n.fields.cEmail=document.getElementById("cEmail"),n.fields.cMessage=document.getElementById("cMessage"),n.sendButton.viewport=document.getElementById("cSubmit"),n.states=["is-error","is-fail","is-sending","is-success"],n.changeState=function(e){if(n.viewport){for(var t=n.states.length;t--;)n.viewport.classList.remove(n.states[t]);n.viewport.classList.add(e)}},n.sendRequest=function(e){e&&$.ajax({cache:!1,crossDomain:!0,data:e,method:"get",beforeSend:function(){s=!0,n.changeState("is-sending")},error:function(t){console.log(t),n.changeState("is-fail"),n.send(e,5e3)},success:function(e){console.log(e),e.sent?n.changeState("is-success"):n.changeState("is-error"),s=!1},timeout:12e3,url:i})},n.send=function(e,t){e&&(t?setTimeout(function(){n.sendRequest(e)},t):n.sendRequest(e))},n.sendButton.viewport.addEventListener("click",function(i){if(i.preventDefault(),!s&&e<t){var o=!!(n.fields.cName.value&&(n.fields.cPhone.value||n.fields.cEmail.value)&&n.fields.cCity.value&&n.fields.cMessage.value);if(o){s=!0,e++;var a={cName:n.fields.cName.value,cPhone:n.fields.cPhone.value,cEmail:n.fields.cEmail.value,cAddress:"",cCity:n.fields.cCity.value,cMessage:n.fields.cMessage.value};n.send(a,!1)}else n.changeState("is-error")}})}return e}(),Logo=function(){function e(e,t,i){this.viewport=e,this.url=t,this.fallback=i,this.get()}return e.prototype.appendTo=function(e,t){t?e.insertBefore(this.viewport,t):e.appendChild(this.viewport)},e.prototype.cloneTo=function(e){e.innerHTML=this.content},e.prototype.get=function(){var e=this;if(this.viewport&&this.url){var t=new XMLHttpRequest;t.open("GET",this.url,!0),t.onreadystatechange=function(){if(4===this.readyState&&200==this.status&&this.responseText)try{e.content=this.responseText,e.viewport.innerHTML=e.content,e.fallback&&e.fallback()}catch(t){}},t.send(),t=null}},e}(),RequiredField=function(){function e(e,t){var i=this;this.viewport=e,this.input={},this.fieldClass=t,this.onClick=function(){try{i.input.viewport.focus()}catch(e){}},this.onFocus=function(){i.viewport.classList.add("has-focus"),i.input.viewport.value&&i.viewport.classList.remove("is-empty")},this.onBlur=function(){i.viewport.classList.remove("has-focus"),i.input.viewport.value?i.viewport.classList.remove("is-empty"):i.viewport.classList.add("is-empty")},this.onInput=function(){i.input.viewport.value?(i.viewport.classList.remove("is-empty"),i.viewport.classList.add("has-label"),i.viewport.classList.add("is-valid")):(i.viewport.classList.remove("has-label"),i.viewport.classList.remove("is-valid"))},this.viewport&&this.init()}return e.prototype.normalize=function(){this.input.viewport.value&&this.viewport.classList.add("has-label")},e.prototype.addListeners=function(){try{this.viewport.addEventListener("click",this.onClick,!1),this.input.viewport.addEventListener("focus",this.onFocus,!1),this.input.viewport.addEventListener("blur",this.onBlur,!1),this.input.viewport.addEventListener("input",this.onInput,!1)}catch(e){}},e.prototype.getInputElement=function(){return this.input.viewport=this.viewport.querySelector(this.fieldClass),!!this.input.viewport},e.prototype.init=function(){this.getInputElement()&&this.addListeners(),this.normalize()},e}();