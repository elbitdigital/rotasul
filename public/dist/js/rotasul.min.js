/*!
 * Mowe {ProjectName} Project v0.0.0 (http://letsmowe.org/)
 * Copyright 2013-2015 Mowe Developers
 * Licensed under MIT (https://github.com/mowekabanas/base/blob/master/LICENSE)
*/
var formSentCount=0,formSentCountLimit=2,requestURL="http://service.elbit.com.br/mailman/rotasul/",formLocked=!1,form={viewport:document.getElementById("cForm")};form.fields={},form.sendButton={},form.fields.cName=document.getElementById("cName"),form.fields.cPhone=document.getElementById("cPhone"),form.fields.cEmail=document.getElementById("cEmail"),form.fields.cMessage=document.getElementById("cMessage"),form.sendButton.viewport=document.getElementById("cSubmit"),form.fields.cReceiver={posto:document.getElementById("cAuto"),restaurante:document.getElementById("cRest")},form.states=["is-error","is-fail","is-sending","is-success"],form.changeState=function(t){if(form.viewport){for(var e=form.states.length;e--;)form.viewport.classList.remove(form.states[e]);form.viewport.classList.add(t)}},form.changeStateError=function(t,e){this.changeState(t),"is-error"==t&&(form.viewport.querySelector(".ContactFormStatus-text--error").innerText=e)},form.sendRequest=function(t){if(t){var e=new XMLHttpRequest;formLocked=!0,form.changeState("is-sending"),e.ontimeout=function(t){console.log(t),form.changeState("is-fail")},e.onerror=function(){form.changeState("is-error")},e.onreadystatechange=function(t){4==e.readyState&&(200==e.status?(console.log(e.responseText),form.changeState("is-success")):form.changeState("is-error")),formLocked=!1},e.withCredentials=!0,e.open("GET",requestURL+"?"+form.requestParams(t),!0),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.timeout=12e3,e.send(null)}},form.requestParams=function(t){var e="",i=encodeURIComponent;for(var s in t)e+="&"+i(s)+"="+i(t[s]);return e.slice(1)+"&_t="+(new Date).getTime()},form.send=function(t,e){t&&(e?setTimeout(function(){form.sendRequest(t)},e):form.sendRequest(t))},form.sendButton.viewport.addEventListener("click",function(t){if(t.preventDefault(),!formLocked&&formSentCount<formSentCountLimit){var e=!0,i="";if(form.fields.cName.value&&form.fields.cMessage.value?form.fields.cPhone.value||form.fields.cEmail.value?form.fields.cPhone.parentNode.classList.contains("is-error")||form.fields.cEmail.parentNode.classList.contains("is-error")?(i="Não foi possível enviar, informe os dados corretamente.",e=!1):e=!0:(i="Não foi possível enviar, informe pelos menos um email ou um telefone.",e=!1):(i="Não foi possível enviar, verifique os campos e tente novamente.",e=!1),e){formLocked=!0,formSentCount++;var s={cName:form.fields.cName.value,cPhone:form.fields.cPhone.value,cEmail:form.fields.cEmail.value,cAddress:"",cCity:"",cMessage:form.fields.cMessage.value};form.send(s,!1)}else form.changeStateError("is-error",i)}});var GalleryItem=function(){function t(t){this.element=t,this.config={backgroundElementSelector:".GalleryItem-background",backgroundElementClassName:"GalleryItem-background",imageElementSelector:".GalleryItem-image",imageElementClassName:"GalleryItem-image",innerElementSelector:".GalleryItem-inner",innerElementClassName:"GalleryItem-inner",figureElementSelector:".GalleryItem-figure",figureElementClassName:"GalleryItem-figure",imgElementSelector:".GalleryItem-figure img",imgElementClassName:"GalleryItem-figure img",state:{isPrevious:"is-previous",isCurrent:"is-current",isNext:"is-next"}},this.element&&this.init()}return t.prototype.isPrevious=function(){this.element.classList.remove(this.config.state.isCurrent),this.element.classList.remove(this.config.state.isNext),this.element.classList.add(this.config.state.isPrevious)},t.prototype.isCurrent=function(){this.element.classList.remove(this.config.state.isPrevious),this.element.classList.remove(this.config.state.isNext),this.element.classList.add(this.config.state.isCurrent)},t.prototype.isNext=function(){this.element.classList.remove(this.config.state.isPrevious),this.element.classList.remove(this.config.state.isCurrent),this.element.classList.add(this.config.state.isNext)},t.prototype.getItemID=function(){return this.element.dataset.id},t.prototype.setItemID=function(t){this.element.dataset.id=t},t.prototype.setImageBackground=function(){this.img&&this.background&&(this.image.style.backgroundImage='url("'+this.img.src+'")')},t.prototype.getElements=function(){this.background=this.element.querySelector(this.config.backgroundElementSelector),this.image=this.element.querySelector(this.config.imageElementSelector),this.inner=this.element.querySelector(this.config.innerElementSelector),this.figure=this.element.querySelector(this.config.figureElementSelector),this.img=this.element.querySelector(this.config.imgElementSelector)},t.prototype.init=function(){this.getElements(),this.setImageBackground()},t}(),GalleryNavigation=function(){function t(t,e){var i=this;this.element=t,this.gallery=e,this.delay=!1,this.current=0,this.config={footerElementClassName:"GalleryNavigation-footer",footerElementSelector:".GalleryNavigation-footer",footerControlsElementClassName:"GalleryNavigation-footer-controls",footerControlsElementSelector:".GalleryNavigation-footer-controls",sideControlsElementClassName:"GalleryNavigation-side-controls",sideControlsElementSelector:".GalleryNavigation-side-controls",pillElementClassName:"GalleryNavigationPill",pillElementSelector:".GalleryNavigationPill",state:{isPrevious:"is-previous",isCurrent:"is-current",isNext:"is-next"}},this.pillOnClick=function(){this.dataset.targetItemId&&i.goTo(this.dataset.targetItemId)},this.gallery&&this.init()}return t.prototype.goTo=function(t){for(var e=!1,i=0;i<this.gallery.items.length;i++)this.gallery.items[i]&&(e?this.gallery.items[i].isNext():this.gallery.items[i].isPrevious(),this.gallery.items[i].getItemID()==t&&(this.gallery.items[i].isCurrent(),e=!0));this.activeCurrentPill(t),this.resetDelay()},t.prototype.activeCurrentPill=function(t){for(var e=this.pills.length;e--;)this.pills[e].dataset.targetItemId==t?this.pills[e].classList.add("is-active"):this.pills[e].classList.remove("is-active")},t.prototype.resetDelay=function(){var t=this;this.delay&&clearInterval(this.delay),this.delay=setInterval(function(){t.current+1>t.gallery.items.length&&(t.current=0),t.goTo(t.current++)},4e3)},t.prototype.start=function(){this.goTo(this.current++)},t.prototype.build=function(){if(this.pills=[],this.footerControlsElement)for(var t=0;t<this.gallery.items.length;t++){var e=document.createElement("div");e.dataset.targetItemId=this.gallery.items[t].getItemID(),e.className=this.config.pillElementClassName,e.addEventListener("click",this.pillOnClick,!1),this.footerControlsElement.appendChild(e),this.pills.push(e)}},t.prototype.getElements=function(){this.footerElement=this.element.querySelector(this.config.footerElementSelector),this.footerControlsElement=this.element.querySelector(this.config.footerControlsElementSelector),this.sideControlsElement=this.element.querySelector(this.config.sideControlsElementSelector)},t.prototype.init=function(){this.getElements(),this.gallery.giveItemsAnID(),this.build()},t}(),Gallery=function(){function t(t){this.element=t,this.config={backgroundElementSelector:".Gallery-background",innerElementSelector:".Gallery-inner",navigationElementSelector:".Gallery-navigation",itemElementsSelector:".GalleryItem"},this.element&&this.init()}return t.prototype.giveItemsAnID=function(){for(var t=this.items.length;t--;)this.items[t].getItemID()||this.items[t].setItemID(t)},t.prototype.getItems=function(){for(var t=[],e=this.element.querySelectorAll(this.config.itemElementsSelector),i=0;i<e.length;i++)t.push(new GalleryItem(e[i]));return t},t.prototype.getElements=function(){this.backgroundElement=this.element.querySelector(this.config.backgroundElementSelector),this.innerElement=this.element.querySelector(this.config.innerElementSelector),this.navigationElement=this.element.querySelector(this.config.navigationElementSelector)},t.prototype.init=function(){this.getElements(),this.items=this.getItems(),this.navigation=new GalleryNavigation(this.navigationElement,this),this.navigation.start()},t}(),Logo=function(){function t(t,e,i){this.viewport=t,this.url=e,this.fallback=i,this.get()}return t.prototype.appendTo=function(t,e){e?t.insertBefore(this.viewport,e):t.appendChild(this.viewport)},t.prototype.cloneTo=function(t){t.innerHTML=this.content},t.prototype.get=function(){var t=this;if(this.viewport&&this.url){var e=new XMLHttpRequest;e.open("GET",this.url,!0),e.onreadystatechange=function(){if(4===this.readyState&&200==this.status&&this.responseText)try{t.content=this.responseText,t.viewport.innerHTML=t.content,t.fallback&&t.fallback()}catch(e){}},e.send(),e=null}},t}(),Navigation=function(){function t(t,e,i){var s=this;this.viewport=t,this.document=e,this.menu=i||!1,this.transition={},this.transitionDelay={},this.title={},this.title["default"]="La Dorni",this.title.defaultPrefix="La Dorni | ",this.title.defaultPostfix=" | La Dorni",this.navigationItems=[],this.home=!1,this.error=!1,this.current=!1,this.changePageCount=0,this.onNavigationItemClick=function(t){if(this.dataset.navigationTarget){s.menu&&s.menu.isActive&&s.menu.close(),t.preventDefault();var e=s.queryNavigationItem(this.dataset.navigationTarget);e&&s.change(e,!1);try{ga("send","event",{eventCategory:"Click em item de navegação",eventAction:"click",eventLabel:this.href,eventValue:101})}catch(i){}}},this.onPopStateCtrl=function(t){var e=s.queryNavigationItem(history.state.name);e&&s.change(e,!0);try{ga("send","event",{eventCategory:"Ação de avançar ou voltar",eventAction:"popstate",eventLabel:window.location.href,eventValue:102})}catch(i){}}}return t.prototype.pushItem=function(t,e){var i=new NavigationItem(t,e);i.isHome&&(this.home=i),this.navigationItems.push(i)},t.prototype.matchURL=function(t){return!!window.location.href.match(new RegExp(t,"g"))},t.prototype.queryCurrentPage=function(){for(var t=this.navigationItems.length;t--;)if(this.matchURL(this.navigationItems[t].url))return this.navigationItems[t];return this.home},t.prototype.buildTitle=function(t){return this.title?t?this.title.defaultPostfix?t+this.title.defaultPostfix:this.title.defaultPrefix?this.title.defaultPostfix+t:t:this.title["default"]:t?t:""},t.prototype.removeDocumentState=function(t){this.document.viewport&&this.document.viewport.classList.remove(t)},t.prototype.addDocumentState=function(t){this.document.viewport&&this.document.viewport.classList.add(t)},t.prototype.setTitle=function(t){t&&(document.title=this.buildTitle(t.title))},t.prototype.setCurrentPage=function(t,e){for(var i=this.navigationItems.length;i--;)this.navigationItems[i].stateClass&&this.document.viewport.classList.remove(this.navigationItems[i].stateClass),this.navigationItems[i].page.setActive(!1);t&&t.item&&t.item.action&&t.item.action.after&&t.item.action.after(this),e&&(e.state&&(e.state.stateClass&&this.document.viewport.classList.add(e.state.stateClass),this.setTitle(e.state)),e.item&&(e.item.action&&e.item.action.before&&e.item.action.before(this),e.item.page&&e.item.page.setActive(!0))),this.changePageCount++},t.prototype.setCurrentState=function(t,e){e?history.replaceState(t,t.title,t.url):history.pushState(t,t.title,t.url)},t.prototype.change=function(t,e){var i=this,s={},n={};n.item=t,n.state=new NavigationState(t),this.current?s=this.current:(s.item=this.queryCurrentPage(),s.state=history.state||!1),n.state&&(this.setCurrentState(n.state,e),e?this.setCurrentPage(s,n):s.state&&s.state.name!=n.state.name?this.transition&&(this.transition.start(),setTimeout(function(){i.setCurrentPage(s,n)},700)):i.setCurrentPage(s,n)),this.current=n},t.prototype.queryNavigationItem=function(t){for(var e=this.navigationItems.length;e--;)if(this.navigationItems[e].name==t)return this.navigationItems[e];return!1},t.prototype.getTransition=function(){var t=this.viewport.querySelector(".Transition");t&&(this.transition=new Transition(t,this))},t.prototype.addListeners=function(){window.addEventListener("popstate",this.onPopStateCtrl,!1);for(var t=this.document.viewport.querySelectorAll(".NavigationItem"),e=t.length;e--;)t[e].addEventListener("click",this.onNavigationItemClick,!1)},t.prototype.init=function(){this.addListeners(),this.getTransition(),this.navigationItems.length&&this.change(this.queryCurrentPage(),!1)},t}(),NavigationItem=function(){function t(t,e){this.name=t.itemName,this.title=t.itemTitle,this.url=t.itemURL,this.isHome=t.isHome||!1,this.stateClass=t.stateClass||!1,this.action=t.action||!1,this.page=e}return t}(),NavigationState=function(){function t(t){this.name=t.name||!1,this.title=t.title||!1,this.url=t.url||!1,this.stateClass=t.stateClass||!1}return t}(),RequiredField=function(){function t(t,e){var i=this;this.viewport=t,this.input={},this.label={},this.fieldClass=e,this.message={label:"",empty:this.viewport.dataset.empty,invalid:this.viewport.dataset.invalid},this.onClick=function(){try{i.input.viewport.focus()}catch(t){}},this.onFocus=function(){i.viewport.classList.add("has-focus")},this.onBlur=function(){i.viewport.classList.remove("has-focus"),i.input.viewport.value?i.validateInput(i.input.viewport)?(i.viewport.classList.add("is-valid"),i.viewport.classList.remove("is-error")):(i.viewport.classList.remove("is-valid"),i.viewport.classList.add("is-error"),i.viewport.classList.add("has-label")):(i.toggleLabel("default"),i.viewport.classList.remove("is-valid"),i.viewport.classList.remove("is-error"))},this.onInput=function(){i.input.viewport.value?(i.viewport.classList.add("has-label"),i.viewport.classList.contains("is-error")?i.validateInput(i.input.viewport)&&(i.viewport.classList.add("is-valid"),i.viewport.classList.remove("is-error")):i.viewport.classList.contains("is-valid")&&(i.validateInput(i.input.viewport)||(i.viewport.classList.remove("is-valid"),i.viewport.classList.add("is-error"),i.viewport.classList.add("has-label")))):i.viewport.classList.remove("has-label")},this.viewport&&this.init()}return t.prototype.normalize=function(){this.input.viewport.value&&this.viewport.classList.add("has-label")},t.prototype.addListeners=function(){try{this.viewport.addEventListener("click",this.onClick,!1),this.input.viewport.addEventListener("focus",this.onFocus,!1),this.input.viewport.addEventListener("blur",this.onBlur,!1),this.input.viewport.addEventListener("input",this.onInput,!1)}catch(t){}},t.prototype.getInputElement=function(){return this.input.viewport=this.viewport.querySelector(this.fieldClass),this.label.viewport=this.viewport.querySelector("label"),this.message.label=this.label.viewport.innerText,!!this.input.viewport},t.prototype.validateInput=function(t){if(""==t.value)return this.toggleLabel("empty"),!1;if(this.toggleLabel("default"),"text"==t.type)return this.toggleLabel("default"),!0;if("email"==t.type){var e=/^[a-zA-Z0-9_.+-]+@[a-zA-Z0-9-]+\.[a-zA-Z0-9-.]+$/;return t.validity.valid&&e.test(t.value)?(this.toggleLabel("default"),!0):(this.toggleLabel("invalid"),!1)}if("tel"==t.type){t.value.replace(/\s/g,"").length<=13&&(t.value=t.value.replace(/\s/g,""));var i=/^[+#*]?[0-9]{8,13}$/;return i.test(t.value)?(this.toggleLabel("default"),!0):(this.toggleLabel("invalid"),!1)}return t.validity.valid},t.prototype.toggleLabel=function(t){switch(t){case"invalid":this.label.viewport.innerText=this.message.invalid;break;case"empty":this.label.viewport.innerText=this.message.empty;break;case"default":this.label.viewport.innerText=this.message.label}},t.prototype.init=function(){this.getInputElement()&&this.addListeners(),this.normalize()},t}();