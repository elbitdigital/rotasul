/*!
 * Mowe {ProjectName} Project v0.0.0 (http://letsmowe.org/)
 * Copyright 2013-2015 Mowe Developers
 * Licensed under MIT (https://github.com/mowekabanas/base/blob/master/LICENSE)
*/
var formSentCount=0,formSentCountLimit=2,requestURL="http://service.elbit.com.br/mailman/rotasul",formLocked=!1,form={viewport:document.getElementById("cForm")};form.fields={},form.sendButton={},form.fields.cName=document.getElementById("cName"),form.fields.cPhone=document.getElementById("cPhone"),form.fields.cEmail=document.getElementById("cEmail"),form.fields.cMessage=document.getElementById("cMessage"),form.sendButton.viewport=document.getElementById("cSubmit"),form.states=["is-error","is-fail","is-sending","is-success"],form.changeState=function(e){if(form.viewport){for(var t=form.states.length;t--;)form.viewport.classList.remove(form.states[t]);form.viewport.classList.add(e)}},form.sendRequest=function(e){if(e){var t=new XMLHttpRequest;formLocked=!0,form.changeState("is-sending"),t.ontimeout=function(e){console.log(e),form.changeState("is-fail")},t.onerror=function(){form.changeState("is-error")},t.onreadystatechange=function(e){4==t.readyState&&(200==t.status?(console.log(t.responseText),form.changeState("is-success")):form.changeState("is-error")),formLocked=!1},t.withCredentials=!0,t.open("GET",requestURL+"?"+form.requestParams(e),!0),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.timeout=12e3,t.send(null)}},form.requestParams=function(e){var t="",i=encodeURIComponent;for(var s in e)t+="&"+i(s)+"="+i(e[s]);return t.slice(1)+"&_t="+(new Date).getTime()},form.send=function(e,t){e&&(t?setTimeout(function(){form.sendRequest(e)},t):form.sendRequest(e))},form.sendButton.viewport.addEventListener("click",function(e){if(e.preventDefault(),!formLocked&&formSentCount<formSentCountLimit){var t=!(!form.fields.cName.value||!form.fields.cPhone.value&&!form.fields.cEmail.value||!form.fields.cMessage.value);if(t){formLocked=!0,formSentCount++;var i={cName:form.fields.cName.value,cPhone:form.fields.cPhone.value,cEmail:form.fields.cEmail.value,cAddress:"",cCity:"",cMessage:form.fields.cMessage.value};form.send(i,!1)}else form.changeState("is-error")}});var GalleryItem=function(){function e(e){this.element=e,this.config={backgroundElementSelector:".GalleryItem-background",backgroundElementClassName:"GalleryItem-background",imageElementSelector:".GalleryItem-image",imageElementClassName:"GalleryItem-image",innerElementSelector:".GalleryItem-inner",innerElementClassName:"GalleryItem-inner",figureElementSelector:".GalleryItem-figure",figureElementClassName:"GalleryItem-figure",imgElementSelector:".GalleryItem-figure img",imgElementClassName:"GalleryItem-figure img",state:{isPrevious:"is-previous",isCurrent:"is-current",isNext:"is-next"}},this.element&&this.init()}return e.prototype.isPrevious=function(){this.element.classList.remove(this.config.state.isCurrent),this.element.classList.remove(this.config.state.isNext),this.element.classList.add(this.config.state.isPrevious)},e.prototype.isCurrent=function(){this.element.classList.remove(this.config.state.isPrevious),this.element.classList.remove(this.config.state.isNext),this.element.classList.add(this.config.state.isCurrent)},e.prototype.isNext=function(){this.element.classList.remove(this.config.state.isPrevious),this.element.classList.remove(this.config.state.isCurrent),this.element.classList.add(this.config.state.isNext)},e.prototype.getItemID=function(){return this.element.dataset.id},e.prototype.setItemID=function(e){this.element.dataset.id=e},e.prototype.setImageBackground=function(){this.img&&this.background&&(this.image.style.backgroundImage='url("'+this.img.src+'")')},e.prototype.getElements=function(){this.background=this.element.querySelector(this.config.backgroundElementSelector),this.image=this.element.querySelector(this.config.imageElementSelector),this.inner=this.element.querySelector(this.config.innerElementSelector),this.figure=this.element.querySelector(this.config.figureElementSelector),this.img=this.element.querySelector(this.config.imgElementSelector)},e.prototype.init=function(){this.getElements(),this.setImageBackground()},e}(),GalleryNavigation=function(){function e(e,t){var i=this;this.element=e,this.gallery=t,this.delay=!1,this.current=0,this.config={footerElementClassName:"GalleryNavigation-footer",footerElementSelector:".GalleryNavigation-footer",footerControlsElementClassName:"GalleryNavigation-footer-controls",footerControlsElementSelector:".GalleryNavigation-footer-controls",sideControlsElementClassName:"GalleryNavigation-side-controls",sideControlsElementSelector:".GalleryNavigation-side-controls",pillElementClassName:"GalleryNavigationPill",pillElementSelector:".GalleryNavigationPill",state:{isPrevious:"is-previous",isCurrent:"is-current",isNext:"is-next"}},this.pillOnClick=function(){this.dataset.targetItemId&&i.goTo(this.dataset.targetItemId)},this.gallery&&this.init()}return e.prototype.goTo=function(e){for(var t=!1,i=0;i<this.gallery.items.length;i++)this.gallery.items[i]&&(t?this.gallery.items[i].isNext():this.gallery.items[i].isPrevious(),this.gallery.items[i].getItemID()==e&&(this.gallery.items[i].isCurrent(),t=!0));this.activeCurrentPill(e),this.resetDelay()},e.prototype.activeCurrentPill=function(e){for(var t=this.pills.length;t--;)this.pills[t].dataset.targetItemId==e?this.pills[t].classList.add("is-active"):this.pills[t].classList.remove("is-active")},e.prototype.resetDelay=function(){var e=this;this.delay&&clearInterval(this.delay),this.delay=setInterval(function(){e.current+1>e.gallery.items.length&&(e.current=0),e.goTo(e.current++)},4e3)},e.prototype.start=function(){this.goTo(this.current++)},e.prototype.build=function(){if(this.pills=[],this.footerControlsElement)for(var e=0;e<this.gallery.items.length;e++){var t=document.createElement("div");t.dataset.targetItemId=this.gallery.items[e].getItemID(),t.className=this.config.pillElementClassName,t.addEventListener("click",this.pillOnClick,!1),this.footerControlsElement.appendChild(t),this.pills.push(t)}},e.prototype.getElements=function(){this.footerElement=this.element.querySelector(this.config.footerElementSelector),this.footerControlsElement=this.element.querySelector(this.config.footerControlsElementSelector),this.sideControlsElement=this.element.querySelector(this.config.sideControlsElementSelector)},e.prototype.init=function(){this.getElements(),this.gallery.giveItemsAnID(),this.build()},e}(),Gallery=function(){function e(e){this.element=e,this.config={backgroundElementSelector:".Gallery-background",innerElementSelector:".Gallery-inner",navigationElementSelector:".Gallery-navigation",itemElementsSelector:".GalleryItem"},this.element&&this.init()}return e.prototype.giveItemsAnID=function(){for(var e=this.items.length;e--;)this.items[e].getItemID()||this.items[e].setItemID(e)},e.prototype.getItems=function(){for(var e=[],t=this.element.querySelectorAll(this.config.itemElementsSelector),i=0;i<t.length;i++)e.push(new GalleryItem(t[i]));return e},e.prototype.getElements=function(){this.backgroundElement=this.element.querySelector(this.config.backgroundElementSelector),this.innerElement=this.element.querySelector(this.config.innerElementSelector),this.navigationElement=this.element.querySelector(this.config.navigationElementSelector)},e.prototype.init=function(){this.getElements(),this.items=this.getItems(),this.navigation=new GalleryNavigation(this.navigationElement,this),this.navigation.start()},e}(),Logo=function(){function e(e,t,i){this.viewport=e,this.url=t,this.fallback=i,this.get()}return e.prototype.appendTo=function(e,t){t?e.insertBefore(this.viewport,t):e.appendChild(this.viewport)},e.prototype.cloneTo=function(e){e.innerHTML=this.content},e.prototype.get=function(){var e=this;if(this.viewport&&this.url){var t=new XMLHttpRequest;t.open("GET",this.url,!0),t.onreadystatechange=function(){if(4===this.readyState&&200==this.status&&this.responseText)try{e.content=this.responseText,e.viewport.innerHTML=e.content,e.fallback&&e.fallback()}catch(t){}},t.send(),t=null}},e}(),RequiredField=function(){function e(e,t){var i=this;this.viewport=e,this.input={},this.fieldClass=t,this.onClick=function(){try{i.input.viewport.focus()}catch(e){}},this.onFocus=function(){i.viewport.classList.add("has-focus"),i.input.viewport.value&&i.viewport.classList.remove("is-empty")},this.onBlur=function(){i.viewport.classList.remove("has-focus"),i.input.viewport.value?i.viewport.classList.remove("is-empty"):i.viewport.classList.add("is-empty")},this.onInput=function(){i.input.viewport.value?(i.viewport.classList.remove("is-empty"),i.viewport.classList.add("has-label"),i.viewport.classList.add("is-valid")):(i.viewport.classList.remove("has-label"),i.viewport.classList.remove("is-valid"))},this.viewport&&this.init()}return e.prototype.normalize=function(){this.input.viewport.value&&this.viewport.classList.add("has-label")},e.prototype.addListeners=function(){try{this.viewport.addEventListener("click",this.onClick,!1),this.input.viewport.addEventListener("focus",this.onFocus,!1),this.input.viewport.addEventListener("blur",this.onBlur,!1),this.input.viewport.addEventListener("input",this.onInput,!1)}catch(e){}},e.prototype.getInputElement=function(){return this.input.viewport=this.viewport.querySelector(this.fieldClass),!!this.input.viewport},e.prototype.init=function(){this.getInputElement()&&this.addListeners(),this.normalize()},e}();